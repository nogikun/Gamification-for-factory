(globalThis.webpackChunkworker_app=globalThis.webpackChunkworker_app||[]).push([[2868],{"./node_modules/@stencil/core/internal/client lazy recursive ^\\.\\/.*\\.entry\\.js.*$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$":module=>{function webpackEmptyAsyncContext(req){return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}))}webpackEmptyAsyncContext.keys=()=>[],webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id="./node_modules/@stencil/core/internal/client lazy recursive ^\\.\\/.*\\.entry\\.js.*$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$",module.exports=webpackEmptyAsyncContext},"./src/stories/Search/Event.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Event_stories});var dist=__webpack_require__("./node_modules/@storybook/test/dist/index.mjs"),react=__webpack_require__("./node_modules/react/index.js"),react_dist=__webpack_require__("./node_modules/@ionic/react/dist/index.js"),react_redux=__webpack_require__("./node_modules/react-redux/dist/react-redux.mjs"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),createTheme=__webpack_require__("./node_modules/@mui/material/esm/styles/createTheme.js"),ThemeProvider=__webpack_require__("./node_modules/@mui/material/esm/styles/ThemeProvider.js"),Card=__webpack_require__("./node_modules/@mui/material/esm/Card/Card.js"),CardMedia=__webpack_require__("./node_modules/@mui/material/esm/CardMedia/CardMedia.js"),CardContent=__webpack_require__("./node_modules/@mui/material/esm/CardContent/CardContent.js"),Typography=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),Alert_Alert=__webpack_require__("./node_modules/@mui/material/esm/Alert/Alert.js"),Chip=__webpack_require__("./node_modules/@mui/material/esm/Chip/Chip.js"),Box=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js"),Paper=__webpack_require__("./node_modules/@mui/material/esm/Paper/Paper.js"),Table=__webpack_require__("./node_modules/@mui/material/esm/Table/Table.js"),TableBody=__webpack_require__("./node_modules/@mui/material/esm/TableBody/TableBody.js"),TableCell=__webpack_require__("./node_modules/@mui/material/esm/TableCell/TableCell.js"),TableContainer=__webpack_require__("./node_modules/@mui/material/esm/TableContainer/TableContainer.js"),TableRow=__webpack_require__("./node_modules/@mui/material/esm/TableRow/TableRow.js"),Button=__webpack_require__("./node_modules/@mui/material/esm/Button/Button.js"),TextField=__webpack_require__("./node_modules/@mui/material/esm/TextField/TextField.js"),Snackbar=__webpack_require__("./node_modules/@mui/material/esm/Snackbar/Snackbar.js"),CalendarToday=__webpack_require__("./node_modules/@mui/icons-material/esm/CalendarToday.js"),LocationOn=__webpack_require__("./node_modules/@mui/icons-material/esm/LocationOn.js"),People=__webpack_require__("./node_modules/@mui/icons-material/esm/People.js"),School=__webpack_require__("./node_modules/@mui/icons-material/esm/School.js"),Payments=__webpack_require__("./node_modules/@mui/icons-material/esm/Payments.js"),Business=__webpack_require__("./node_modules/@mui/icons-material/esm/Business.js"),Info=__webpack_require__("./node_modules/@mui/icons-material/esm/Info.js"),CheckCircleOutline=__webpack_require__("./node_modules/@mui/icons-material/esm/CheckCircleOutline.js");const apiConnector=__webpack_require__("./node_modules/axios/lib/axios.js").A.create({baseURL:"http://localhost:3000",headers:{"Content-Type":"application/json"}});apiConnector.interceptors.request.use((config=>{var _config$baseURL,_config$url;return(null!==(_config$baseURL=config.baseURL)&&void 0!==_config$baseURL&&_config$baseURL.includes("ngrok")||null!==(_config$url=config.url)&&void 0!==_config$url&&_config$url.includes("ngrok"))&&(config.headers["ngrok-skip-browser-warning"]="true",config.headers["User-Agent"]="ngrok-api-client/1.0",config.headers["X-Forwarded-For"]="127.0.0.1",config.headers.Accept="application/json",console.log("Axios interceptor: ngrok headers applied",config.headers)),config}),(error=>Promise.reject(error)));var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Event_Event=_ref=>{var _params;let{event_id:event_id_prop,zIndex=1,onClick}=_ref,ionRouter=null;try{ionRouter=(0,react_dist.jq)()}catch(error){console.warn("Event.tsx: useIonRouter failed (likely no Ionic router context):",error),ionRouter=null}(0,react_redux.wA)();const darkTheme=(0,react_redux.d4)((state=>state.theme.isDarkMode)),host=(0,react_redux.d4)((state=>state.server.host)),portState=(0,react_redux.d4)((state=>state.server.port));(0,react.useEffect)((()=>{const newBaseUrl=portState?`${host}:${portState}`:host;apiConnector.defaults.baseURL=newBaseUrl,console.log(`Event.tsx: API base URL updated to: ${newBaseUrl}`)}),[host,portState]);const port="number"==typeof portState?String(portState):"string"==typeof portState?portState:void 0;let params={};try{params=(0,react_router.g)()||{}}catch(error){console.warn("Event.tsx: useParams failed (likely no router context):",error),params={}}const eventIdFromUrl=null===(_params=params)||void 0===_params?void 0:_params.eventIdFromUrl,eventIdFromRedux=(0,react_redux.d4)((state=>state.searchEvent.eventId)),derivedEventId=event_id_prop||eventIdFromUrl||eventIdFromRedux;console.log(`Event.tsx: prop event_id: ${event_id_prop}, from URL: ${eventIdFromUrl}, from Redux: ${eventIdFromRedux}, derived currentEventId: ${derivedEventId}`);const[currentEventId,setCurrentEventId]=(0,react.useState)(derivedEventId);(0,react.useEffect)((()=>{const newId=event_id_prop||eventIdFromUrl||eventIdFromRedux;newId!==currentEventId&&(setCurrentEventId(newId),console.log(`Event.tsx: currentEventId state updated to: ${newId}`))}),[event_id_prop,eventIdFromUrl,eventIdFromRedux,currentEventId]);const[eventData,setEventData]=(0,react.useState)(null),[loading,setLoading]=(0,react.useState)(!0),[error,setError]=(0,react.useState)(null),[showForm,setShowForm]=(0,react.useState)(!1),[formData,setFormData]=(0,react.useState)({lastName:"",firstName:"",email:"",phoneNumber:"",birthDate:"",address:"",licenses:"",motivation:""}),[snackbarOpen,setSnackbarOpen]=(0,react.useState)(!1),[snackbarMessage,setSnackbarMessage]=(0,react.useState)(""),[snackbarSeverity,setSnackbarSeverity]=(0,react.useState)("success"),AlertComponent=react.forwardRef((function Alert(props,ref){return(0,jsx_runtime.jsx)(Alert_Alert.A,{elevation:6,ref,variant:"filled",...props})})),handleSnackbarClose=(event,reason)=>{"clickaway"!==reason&&setSnackbarOpen(!1)},getTagColor=tag=>{if("object"==typeof tag&&tag.color)return tag.color;const tagString="string"==typeof tag?tag:tag.label||"";if(tagString&&"string"==typeof tagString){return`hsl(${tagString.split("").reduce(((acc,char)=>char.charCodeAt(0)+((acc<<5)-acc)),0)%360}, 70%, 60%)`}return`hsl(${Math.floor(360*Math.random())}, 70%, 60%)`},getTagLabel=tag=>"object"==typeof tag&&tag.label?tag.label:"string"==typeof tag?tag:"";if((0,react.useEffect)((()=>{setLoading(!0),setError(null),console.log(`Event.tsx useEffect triggered for data fetching. currentEventId: ${currentEventId}, typeof: ${typeof currentEventId}`),currentEventId&&"string"==typeof currentEventId&&""!==currentEventId.trim()?(console.log(`Event.tsx: Attempting to fetch event with ID: ${currentEventId}`),async function fetchEventById(eventId,host,port){const endpoint=`/event/${eventId}`,originalBaseURL=apiConnector.defaults.baseURL,newBaseURL=port?`${host}:${port}`:host;apiConnector.defaults.baseURL=newBaseURL,console.log("Requesting URL via apiConnector:",`${newBaseURL}${endpoint}`);try{return(await apiConnector.get(endpoint)).data}catch(error){console.error("API request error:",error);let errorDetail="Failed to fetch event data";if(error&&"object"==typeof error&&"response"in error){const axiosError=error;if(axiosError.response){const contentType=axiosError.response.headers["content-type"];errorDetail=`HTTP error! status: ${axiosError.response.status}`,contentType&&!contentType.includes("application/json")&&(errorDetail+=`. Expected application/json but received ${contentType}`),axiosError.response.data&&("string"==typeof axiosError.response.data?(console.error("Server response (text):",axiosError.response.data.substring(0,500)),errorDetail+=`. Response: ${axiosError.response.data.substring(0,100)}...`):errorDetail+=`. Response: ${JSON.stringify(axiosError.response.data)}`)}}else error&&"object"==typeof error&&"request"in error?errorDetail+=". No response received from server":error&&"object"==typeof error&&"message"in error&&(errorDetail+=`. ${error.message}`);throw new Error(errorDetail)}finally{apiConnector.defaults.baseURL=originalBaseURL}}(currentEventId,host,port).then((data=>{if(data&&"object"==typeof data&&!Array.isArray(data)){var _apiResponse$event_id,_apiResponse$company_,_apiResponse$event_ty,_apiResponse$title,_apiResponse$descript,_apiResponse$start_da,_apiResponse$end_date,_apiResponse$location,_apiResponse$reward,_apiResponse$created_,_apiResponse$updated_,_apiResponse$image;const apiResponse=data;console.log("Event.tsx: Raw apiResponse.tags:",apiResponse.tags);const processEventTags=rawTags=>{let processedTags=[];if(Array.isArray(rawTags))processedTags=rawTags.map((tag=>{if("object"==typeof tag&&null!==tag){const tagObj=tag;if(tagObj.label)return{label:String(tagObj.label),color:tagObj.color?String(tagObj.color):`hsl(${Math.floor(360*Math.random())}, 70%, 60%)`}}else if("string"==typeof tag&&tag){const hash=tag.split("").reduce(((acc,char)=>char.charCodeAt(0)+((acc<<5)-acc)),0);return{label:tag,color:`hsl(${hash%360}, 70%, 60%)`}}return{label:String(tag),color:`hsl(${Math.floor(360*Math.random())}, 70%, 60%)`}}));else if("string"==typeof rawTags&&""!==rawTags.trim())try{const parsed=JSON.parse(rawTags);processedTags=Array.isArray(parsed)?parsed.map((item=>{if("object"==typeof item&&null!==item&&"label"in item){return{label:String(item.label),color:"color"in item?String(item.color):`hsl(${Math.floor(360*Math.random())}, 70%, 60%)`}}if("string"==typeof item&&item){const hash=item.split("").reduce(((acc,char)=>char.charCodeAt(0)+((acc<<5)-acc)),0);return{label:item,color:`hsl(${hash%360}, 70%, 60%)`}}return{label:String(item),color:`hsl(${Math.floor(360*Math.random())}, 70%, 60%)`}})):[{label:String(parsed),color:`hsl(${Math.floor(360*Math.random())}, 70%, 60%)`}]}catch(e){processedTags=rawTags&&"string"==typeof rawTags?rawTags.split(",").map((t=>t.trim())).filter(Boolean).map((tag=>{if(tag&&"string"==typeof tag){const hash=tag.split("").reduce(((acc,char)=>char.charCodeAt(0)+((acc<<5)-acc)),0);return{label:tag,color:`hsl(${hash%360}, 70%, 60%)`}}return{label:String(tag),color:`hsl(${Math.floor(360*Math.random())}, 70%, 60%)`}})):[]}return console.log("Event.tsx: Processed tags for EventData:",processedTags),processedTags},transformedData={event_id:String(null!==(_apiResponse$event_id=apiResponse.event_id)&&void 0!==_apiResponse$event_id?_apiResponse$event_id:""),company_id:String(null!==(_apiResponse$company_=apiResponse.company_id)&&void 0!==_apiResponse$company_?_apiResponse$company_:""),event_type:String(null!==(_apiResponse$event_ty=apiResponse.event_type)&&void 0!==_apiResponse$event_ty?_apiResponse$event_ty:""),title:String(null!==(_apiResponse$title=apiResponse.title)&&void 0!==_apiResponse$title?_apiResponse$title:""),description:String(null!==(_apiResponse$descript=apiResponse.description)&&void 0!==_apiResponse$descript?_apiResponse$descript:""),start_date:String(null!==(_apiResponse$start_da=apiResponse.start_date)&&void 0!==_apiResponse$start_da?_apiResponse$start_da:""),end_date:String(null!==(_apiResponse$end_date=apiResponse.end_date)&&void 0!==_apiResponse$end_date?_apiResponse$end_date:""),location:String(null!==(_apiResponse$location=apiResponse.location)&&void 0!==_apiResponse$location?_apiResponse$location:""),reward:String(null!==(_apiResponse$reward=apiResponse.reward)&&void 0!==_apiResponse$reward?_apiResponse$reward:""),required_qualifications:Array.isArray(apiResponse.required_qualifications)?apiResponse.required_qualifications.map((q=>String(q))):"string"==typeof apiResponse.required_qualifications?[String(apiResponse.required_qualifications)]:[],available_spots:"number"==typeof apiResponse.available_spots?apiResponse.available_spots:Number(apiResponse.available_spots)||0,created_at:String(null!==(_apiResponse$created_=apiResponse.created_at)&&void 0!==_apiResponse$created_?_apiResponse$created_:""),updated_at:String(null!==(_apiResponse$updated_=apiResponse.updated_at)&&void 0!==_apiResponse$updated_?_apiResponse$updated_:""),tags:processEventTags(apiResponse.tags),image:String(null!==(_apiResponse$image=apiResponse.image)&&void 0!==_apiResponse$image?_apiResponse$image:"")};setEventData(transformedData)}else console.error("Unexpected data format received:",data),setError("Received unexpected data format for event details.");setLoading(!1)})).catch((err=>{console.error("Error fetching event details:",err),setError(err.message||"Failed to fetch event details"),setLoading(!1)}))):(console.log(`Event.tsx: Event ID is invalid or missing ('${currentEventId}'), skipping API call.`),setError("指定されたイベントIDの形式が正しくないか、見つかりません。"),setLoading(!1))}),[currentEventId,host,port]),loading)return(0,jsx_runtime.jsx)("div",{children:"Loading..."});if(error||!eventData)return apiConnector.post("/debug/error-report",{error:error||"Event data not available",message:`Failed to fetch event details for ID: ${currentEventId}`,debug_info:"Event component",status_code:500,timestamp:(new Date).toISOString()}).catch((err=>{console.error("Error logging to API:",err)})),(0,jsx_runtime.jsxs)(Alert_Alert.A,{severity:"error",children:["Error: ",error||"Event data not available."]});const muiTheme=(0,createTheme.A)({palette:{mode:darkTheme?"dark":"light"}}),formatDate=dateString=>{if(!dateString)return"N/A";return new Date(dateString).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})},handleFormInputChange=event=>{const{name,value}=event.target;setFormData((prev=>({...prev,[name]:value})))},initialFormData={lastName:"",firstName:"",email:"",phoneNumber:"",birthDate:"",address:"",licenses:"",motivation:""};return(0,jsx_runtime.jsx)("div",{style:{zIndex,position:"relative"},children:(0,jsx_runtime.jsxs)(ThemeProvider.A,{theme:muiTheme,children:[(0,jsx_runtime.jsxs)(Paper.A,{elevation:3,sx:{p:2,margin:"auto",maxWidth:700,flexGrow:1},children:[(0,jsx_runtime.jsxs)(Card.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},mb:2},children:[(0,jsx_runtime.jsx)(CardMedia.A,{component:"img",sx:{width:{xs:"100%",md:200},height:{xs:200,md:"auto"},objectFit:"cover"},image:eventData.image?`data:image/png;base64,${eventData.image}`:"https://via.placeholder.com/200",alt:eventData.title}),(0,jsx_runtime.jsxs)(CardContent.A,{sx:{flex:1},children:[(0,jsx_runtime.jsx)(Typography.A,{gutterBottom:!0,variant:"h5",component:"div",children:eventData.title}),eventData.tags&&eventData.tags.length>0&&(0,jsx_runtime.jsx)(Box.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:1},children:eventData.tags.map(((tag,index)=>(0,jsx_runtime.jsx)(Chip.A,{label:getTagLabel(tag),size:"small",sx:{backgroundColor:getTagColor(tag),color:"#fff"}},`${getTagLabel(tag)}-${index}`)))}),(0,jsx_runtime.jsxs)(Typography.A,{variant:"subtitle1",color:"text.secondary",component:"div",sx:{display:"flex",alignItems:"center",mb:.5},children:[(0,jsx_runtime.jsx)(Business.A,{sx:{mr:1}})," ",eventData.company_id," "]}),(0,jsx_runtime.jsxs)(Typography.A,{variant:"subtitle1",color:"text.secondary",component:"div",sx:{display:"flex",alignItems:"center"},children:[(0,jsx_runtime.jsx)(Payments.A,{sx:{mr:1}})," ",eventData.reward]})]})]}),(0,jsx_runtime.jsxs)(Typography.A,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,jsx_runtime.jsx)(Info.A,{sx:{mr:1}})," イベント詳細"]}),(0,jsx_runtime.jsx)(Typography.A,{variant:"body1",paragraph:!0,children:eventData.description}),(0,jsx_runtime.jsx)(TableContainer.A,{component:Paper.A,sx:{mb:2},variant:"outlined",children:(0,jsx_runtime.jsx)(Table.A,{"aria-label":"event details table",children:(0,jsx_runtime.jsxs)(TableBody.A,{children:[(0,jsx_runtime.jsxs)(TableRow.A,{children:[(0,jsx_runtime.jsx)(TableCell.A,{component:"th",scope:"row",sx:{width:"30%",fontWeight:"bold"},children:(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",alignItems:"center"},children:[(0,jsx_runtime.jsx)(CalendarToday.A,{sx:{mr:1}})," 期間"]})}),(0,jsx_runtime.jsxs)(TableCell.A,{children:[formatDate(eventData.start_date)," - ",formatDate(eventData.end_date)]})]}),(0,jsx_runtime.jsxs)(TableRow.A,{children:[(0,jsx_runtime.jsx)(TableCell.A,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",alignItems:"center"},children:[(0,jsx_runtime.jsx)(LocationOn.A,{sx:{mr:1}})," 場所"]})}),(0,jsx_runtime.jsx)(TableCell.A,{children:eventData.location})]}),(0,jsx_runtime.jsxs)(TableRow.A,{children:[(0,jsx_runtime.jsx)(TableCell.A,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",alignItems:"center"},children:[(0,jsx_runtime.jsx)(People.A,{sx:{mr:1}})," 募集人数"]})}),(0,jsx_runtime.jsxs)(TableCell.A,{children:[eventData.available_spots,"名"]})]}),(0,jsx_runtime.jsxs)(TableRow.A,{children:[(0,jsx_runtime.jsx)(TableCell.A,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",alignItems:"center"},children:[(0,jsx_runtime.jsx)(School.A,{sx:{mr:1}})," 資格要件"]})}),(0,jsx_runtime.jsx)(TableCell.A,{children:eventData.required_qualifications&&eventData.required_qualifications.length>0?(0,jsx_runtime.jsx)(Box.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:eventData.required_qualifications.map((qualification=>(0,jsx_runtime.jsx)(Chip.A,{label:qualification,size:"small",icon:(0,jsx_runtime.jsx)(CheckCircleOutline.A,{}),variant:"outlined"},qualification)))}):(0,jsx_runtime.jsx)(Typography.A,{variant:"body2",color:"text.secondary",children:"特になし"})})]})]})})}),showForm&&(0,jsx_runtime.jsxs)(Box.A,{component:"form",sx:{mt:2,mb:2,p:2,border:"1px solid grey",borderRadius:1},children:[(0,jsx_runtime.jsx)(Typography.A,{variant:"h6",gutterBottom:!0,children:"参加申し込みフォーム"}),(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,label:"姓",name:"lastName",value:formData.lastName,onChange:handleFormInputChange,margin:"normal"}),(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,label:"名",name:"firstName",value:formData.firstName,onChange:handleFormInputChange,margin:"normal"}),(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,label:"メールアドレス",name:"email",type:"email",value:formData.email,onChange:handleFormInputChange,margin:"normal"}),(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,label:"電話番号",name:"phoneNumber",type:"tel",value:formData.phoneNumber,onChange:handleFormInputChange,margin:"normal"}),(0,jsx_runtime.jsx)(TextField.A,{sx:{"& .MuiInputBase-root":{height:"56px"}},fullWidth:!0,label:"生年月日",name:"birthDate",type:"date",value:formData.birthDate,onChange:handleFormInputChange,margin:"normal",InputLabelProps:{shrink:!0}}),(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,label:"住所",name:"address",value:formData.address,onChange:handleFormInputChange,margin:"normal"}),(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,label:"資格・スキル",name:"licenses",value:formData.licenses,onChange:handleFormInputChange,margin:"normal",multiline:!0,rows:3}),(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,label:"応募動機",name:"motivation",value:formData.motivation,onChange:handleFormInputChange,margin:"normal",multiline:!0,rows:4}),(0,jsx_runtime.jsx)(Button.A,{variant:"contained",color:"secondary",onClick:async()=>{const url=port?`${host}:${port}/join-event`:`${host}/join-event`,submissionData={applicant:{applicant_id:`demo-applicant-${Date.now()}`,company_id:"demo-company-001",event_id:currentEventId,name:`${formData.firstName} ${formData.lastName}`,phone_num:formData.phoneNumber,email:formData.email,birthdate:formData.birthDate?formData.birthDate:null,address:formData.address,qualifications:formData.licenses&&"string"==typeof formData.licenses?formData.licenses.split("\n").filter(Boolean):[],motivation:formData.motivation},event_id_model:{event_id:currentEventId}};try{const headers={"Content-Type":"application/json"};url.includes("ngrok")&&(headers["ngrok-skip-browser-warning"]="true",headers["User-Agent"]="ngrok-api-client/1.0",headers["X-Forwarded-For"]="127.0.0.1",headers.Accept="application/json",console.log("Event: ngrokトンネル検出（参加申し込み）: 複数ヘッダーでブラウザ警告をスキップ"));const response=await fetch(url,{method:"POST",headers,body:JSON.stringify(submissionData)});if(response.ok)setSnackbarMessage("イベントへの参加申し込みが完了しました。"),setSnackbarSeverity("success"),setSnackbarOpen(!0),setShowForm(!1),setFormData(initialFormData);else{const errorData=await response.json();console.error("Failed to submit application:",errorData),setSnackbarMessage(`申し込みに失敗しました: ${errorData.detail||response.statusText}`),setSnackbarSeverity("error"),setSnackbarOpen(!0)}}catch(err){console.error("Error submitting application:",err),setSnackbarMessage(`申し込み中にエラーが発生しました: ${err instanceof Error?err.message:"Unknown error"}`),setSnackbarSeverity("error"),setSnackbarOpen(!0)}},sx:{mt:2,padding:"10px 20px",borderRadius:"25px",fontSize:"1.1rem"},children:"申し込む"})]}),!showForm&&(0,jsx_runtime.jsx)(Box.A,{sx:{display:"flex",justifyContent:"center",mt:2},children:(0,jsx_runtime.jsx)(Button.A,{variant:"contained",color:"primary",size:"large",onClick:()=>{setShowForm(!0)},sx:{borderRadius:"50px",height:"auto",paddingTop:"10px",paddingBottom:"10px"},children:"イベントに参加する"})})]}),(0,jsx_runtime.jsx)(Snackbar.A,{open:snackbarOpen,autoHideDuration:6e3,onClose:handleSnackbarClose,children:(0,jsx_runtime.jsx)(AlertComponent,{onClose:handleSnackbarClose,severity:snackbarSeverity,sx:{width:"100%"},children:snackbarMessage})})]})})};Event_Event.__docgenInfo={description:"",methods:[],displayName:"Event",props:{event_id:{required:!1,tsType:{name:"string"},description:""},zIndex:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Event_stories={title:"Search/Event",component:Event_Event,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{},args:{onClick:(0,dist.fn)(),event_id:"11"}},Primary={args:{event_id:"11",zIndex:0}},__namedExportsOrder=["Primary"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:'{\n  args: {\n    // 必要なevent_idのみ\n    event_id: "11",\n    zIndex: 0\n  }\n}',...Primary.parameters?.docs?.source}}}}}]);