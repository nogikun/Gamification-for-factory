(globalThis.webpackChunkworker_app=globalThis.webpackChunkworker_app||[]).push([[9484],{"./node_modules/@stencil/core/internal/client lazy recursive ^\\.\\/.*\\.entry\\.js.*$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$":module=>{function webpackEmptyAsyncContext(req){return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}))}webpackEmptyAsyncContext.keys=()=>[],webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id="./node_modules/@stencil/core/internal/client lazy recursive ^\\.\\/.*\\.entry\\.js.*$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$",module.exports=webpackEmptyAsyncContext},"./src/stories/Search/Card.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>CardComponent});__webpack_require__("./node_modules/react/index.js");var dist=__webpack_require__("./node_modules/@ionic/react/dist/index.js"),react_redux=__webpack_require__("./node_modules/react-redux/dist/react-redux.mjs"),Card_Card=__webpack_require__("./node_modules/@mui/material/esm/Card/Card.js"),CardMedia=__webpack_require__("./node_modules/@mui/material/esm/CardMedia/CardMedia.js"),Box=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js"),Typography=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),Chip=__webpack_require__("./node_modules/@mui/material/esm/Chip/Chip.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const CardComponent=_ref=>{let{jobID,title,campany,details,tags,startDate,endDate,paying,currencySymbol="¥",backgroundColor,color,width,height,borderRadius,bordered,borderColor,borderWidth,base64Image,onClick=()=>{}}=_ref;(0,dist.jq)(),(0,react_redux.wA)(),(0,react_redux.d4)((state=>state.menu.isOpen));return(0,jsx_runtime.jsx)("div",{style:{margin:"10px 10px 10px 10px"},children:(0,jsx_runtime.jsxs)(Card_Card.A,{variant:"outlined",component:"button",role:"button",tabIndex:0,onClick,onKeyPress:e=>{"Enter"!==e.key&&" "!==e.key||onClick()},sx:{p:1.5,display:"flex",flexWrap:"wrap",zIndex:1,width:"100%",height:"100%",border:"none",borderRadius:2,backgroundColor,color,borderColor,borderWidth,borderStyle:bordered?"solid":"none",cursor:"pointer","&:focus":{outline:"2px solid #007FFF",outlineOffset:"2px"},"&:focus:not(:focus-visible)":{outline:"none"}},children:[(0,jsx_runtime.jsx)(CardMedia.A,{component:"img",width:"140",height:"140",src:`data:image/png;base64,${base64Image}`,sx:{borderRadius:"6px",width:{xs:"140px",sm:"140px",md:"140px"},height:{xs:"140px",sm:"140px",md:"140px"}}}),(0,jsx_runtime.jsxs)(Box.A,{sx:{alignSelf:"center",ml:2,width:{xs:"48vw",sm:"50vw",md:"220px"},textAlign:"left"},children:[(0,jsx_runtime.jsx)(Typography.A,{variant:"h6",fontWeight:"bold",noWrap:!0,gutterBottom:!0,children:title}),(0,jsx_runtime.jsx)(Typography.A,{variant:"body2",fontWeight:"regular",children:campany}),(0,jsx_runtime.jsxs)(Typography.A,{variant:"body2",fontWeight:"regular",children:[startDate," ~ ",endDate]}),(0,jsx_runtime.jsxs)(Typography.A,{fontWeight:"bold",noWrap:!0,gutterBottom:!0,children:[currencySymbol," ",paying.toLocaleString()]}),(0,jsx_runtime.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"7px",marginTop:"5px",marginBottom:"5px"},children:tags.map(((tag,index)=>(0,jsx_runtime.jsx)(Chip.A,{size:"small",variant:"outlined",color:"primary",label:tag.label,sx:{".MuiChip-icon":{fontSize:16,ml:"4px",color:"success.500"},borderColor:tag.color,color:tag.color}},tag.label)))})]})]})})};CardComponent.__docgenInfo={description:"",methods:[],displayName:"CardComponent",props:{jobID:{required:!1,tsType:{name:"string"},description:""},title:{required:!0,tsType:{name:"string"},description:""},campany:{required:!0,tsType:{name:"string"},description:""},details:{required:!0,tsType:{name:"string"},description:""},tags:{required:!0,tsType:{name:"Array",elements:[{name:"TagProps"}],raw:"TagProps[]"},description:""},startDate:{required:!0,tsType:{name:"string"},description:""},endDate:{required:!0,tsType:{name:"string"},description:""},paying:{required:!0,tsType:{name:"number"},description:""},currencySymbol:{required:!1,tsType:{name:"union",raw:'"¥" | "$" | "€"',elements:[{name:"literal",value:'"¥"'},{name:"literal",value:'"$"'},{name:"literal",value:'"€"'}]},description:"",defaultValue:{value:'"¥"',computed:!1}},backgroundColor:{required:!1,tsType:{name:"string"},description:""},color:{required:!1,tsType:{name:"string"},description:""},width:{required:!1,tsType:{name:"string"},description:""},height:{required:!1,tsType:{name:"string"},description:""},borderRadius:{required:!1,tsType:{name:"string"},description:""},bordered:{required:!1,tsType:{name:"boolean"},description:""},borderColor:{required:!1,tsType:{name:"string"},description:""},borderWidth:{required:!1,tsType:{name:"number"},description:""},base64Image:{required:!1,tsType:{name:"string"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}}}}},"./src/stories/Search/EventList.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>EventList_stories});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/@ionic/react/dist/index.js"),react_redux=__webpack_require__("./node_modules/react-redux/dist/react-redux.mjs"),Card=__webpack_require__("./src/stories/Search/Card.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const EventList_EventList=_ref=>{let{selectedDate,...props}=_ref;const dispatch=(0,react_redux.wA)(),ionRouter=(0,dist.jq)(),containerRef=(()=>{const containerRef=(0,react.useRef)(null);return(0,dist.t5)((()=>{if(containerRef.current){const firstFocusable=containerRef.current.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');firstFocusable instanceof HTMLElement&&firstFocusable.focus()}})),(0,dist.YU)((()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})),containerRef})(),searchSelectedDate=(0,react_redux.d4)((state=>state.searchDate.selectedDate)),[events,setEvents]=(0,react.useState)([]),[loading,setLoading]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null);searchSelectedDate&&(selectedDate=searchSelectedDate),window.matchMedia("(prefers-color-scheme: dark)").matches?dispatch({type:"theme/setDarkMode",payload:!0}):dispatch({type:"theme/setDarkMode",payload:!1});const darkTheme=(0,react_redux.d4)((state=>state.theme.isDarkMode)),host=(0,react_redux.d4)((state=>state.server.host)),port=(0,react_redux.d4)((state=>state.server.port));return(0,react.useEffect)((()=>{if(!searchSelectedDate)return;setLoading(!0),setError(null);const targetDate=new Date(searchSelectedDate);console.log("targetDate",targetDate),function fetchData(targetDate,host,port){let formatedTargetDate;formatedTargetDate=targetDate instanceof Date?`${targetDate.getFullYear()}-${String(targetDate.getMonth()+1).padStart(2,"0")}-${String(targetDate.getDate()).padStart(2,"0")}`:targetDate;const requestBody={target_date:formatedTargetDate};console.log("入力された日付:",targetDate),console.log("フォーマット後の日付:",formatedTargetDate),console.log("リクエストボディ:",requestBody);const url=port?`${host}:${port}/get-events`:`${host}/get-events`,headers={"Content-Type":"application/json"};return url.includes("ngrok")&&(headers["ngrok-skip-browser-warning"]="true",headers["User-Agent"]="ngrok-api-client/1.0",headers["X-Forwarded-For"]="127.0.0.1",headers.Accept="application/json",console.log("EventList: ngrokトンネル検出: 複数ヘッダーでブラウザ警告をスキップ")),fetch(url,{method:"POST",headers,body:JSON.stringify(requestBody),redirect:"follow"}).then((response=>{if(!response.ok)throw new Error(`HTTP error! status: ${response.status}`);return response.json()})).catch((error=>{throw console.error("Error fetching data:",error),error}))}(targetDate,host,port).then((data=>{console.log("APIレスポンス:",data);const eventsArray=Array.isArray(data)?data:[data];console.log("APIレスポンスの event_id 一覧:",eventsArray.map((ev=>ev.event_id))),data?setEvents(eventsArray):setError("データが見つかりませんでした")})).catch((err=>{console.error("データ取得エラー:",err),setError("イベントデータの取得に失敗しました")})).finally((()=>{setLoading(!1)}))}),[searchSelectedDate]),(0,jsx_runtime.jsxs)("div",{ref:containerRef,role:"region","aria-label":"イベント一覧",children:[loading&&(0,jsx_runtime.jsx)("p",{role:"status",children:"読み込み中..."}),error&&(0,jsx_runtime.jsx)("p",{role:"alert",className:"error-message",children:error}),events.map(((event,index)=>(0,jsx_runtime.jsx)(Card.i,{backgroundColor:darkTheme?"#333333":"#f5f5f5",base64Image:event.image,borderRadius:"10px",campany:event.location?event.location.split(" ")[2]||event.location:"情報なし",color:darkTheme?"#ffffff":"#000000",currencySymbol:"¥",details:event.description||"詳細情報なし",endDate:formatDateForCard(event.end_date),height:"auto",onClick:()=>{console.log(`Card clicked. Event ID from event object: ${event.event_id}, Type: ${typeof event.event_id}`),console.log(`イベント詳細: ${event.event_id}`),dispatch({type:"searchEvent/setEventId",payload:event.event_id}),ionRouter.push(`/event/${event.event_id}`)},paying:event.reward&&Number.parseInt(event.reward.replace(/[^0-9]/g,""),10)||0,startDate:formatDateForCard(event.start_date),tags:parseTags(event.tags).map((tag=>({color:getTagColor(tag),label:tag}))),title:event.title,width:"100%"},index))),0===events.length&&!loading&&!error&&(0,jsx_runtime.jsx)(Card.i,{backgroundColor:darkTheme?"#333333":"#f5f5f5",base64Image:"",borderRadius:"10px",campany:"Automation 株式会社",color:darkTheme?"#ffffff":"#000000",currencySymbol:"¥",details:"詳細情報",endDate:"2023-10-31",height:"100px",onClick:()=>{},paying:7e3,startDate:"2023-10-01",tags:[{color:"#ff0000",label:"溶接"},{color:"#00ff00",label:"金属加工"}],title:"1day インターンシップ",width:"80px"})]})};function getTagColor(tag){return{金属加工:"#ff7043",プラスチック成形:"#42a5f5",組立:"#66bb6a",検査:"#ffca28",包装:"#ec407a"}[tag]||"#9e9e9e"}function formatDateForCard(dateString){try{return new Date(dateString).toISOString().split("T")[0]}catch(error){return console.error("Date formatting error:",error),dateString}}function parseTags(tagsData){const processItem=item=>{if("string"==typeof item)return item;if("object"==typeof item&&null!==item&&"string"==typeof item.label)return item.label;const stringified=String(item);return"[object Object]"!==stringified?stringified:null};let processedTags=[];if(Array.isArray(tagsData))processedTags=tagsData.map(processItem);else if("string"==typeof tagsData){if(!tagsData.trim())return[];try{const parsed=JSON.parse(tagsData);processedTags=Array.isArray(parsed)?parsed.map(processItem):[processItem(parsed)]}catch(e){processedTags=[tagsData]}}return processedTags.filter((tag=>null!==tag&&""!==tag.trim()))}EventList_EventList.__docgenInfo={description:"",methods:[],displayName:"EventList",props:{selectedDate:{required:!1,tsType:{name:"string"},description:""}}};const EventList_stories={title:"Search/EventList",component:EventList_EventList,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{},args:{}},Primary={args:{selectedDate:"2025-05-05"}},__namedExportsOrder=["Primary"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:'{\n  args: {\n    selectedDate: "2025-05-05"\n  }\n}',...Primary.parameters?.docs?.source}}}}}]);